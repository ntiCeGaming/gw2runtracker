<!DOCTYPE html><html lang=en><meta charset=UTF-8><meta name=viewport content="width=device-width, initial-scale=1.0"><title>Reset Database with Wing 8 Steps</title><style>body{color:#fff;background-color:#1a1a1a;max-width:800px;margin:0 auto;padding:20px;font-family:Arial,sans-serif}.container{background-color:#2a2a2a;border-radius:8px;padding:30px;box-shadow:0 4px 6px #0000004d}h1{color:#c02c38;text-align:center;margin-bottom:30px}.warning{color:#fff;background-color:#d32f2f;border-radius:4px;margin-bottom:20px;padding:15px}.info{color:#fff;background-color:#1976d2;border-radius:4px;margin-bottom:20px;padding:15px}.success{color:#fff;background-color:#388e3c;border-radius:4px;margin-bottom:20px;padding:15px;display:none}.error{color:#fff;background-color:#d32f2f;border-radius:4px;margin-bottom:20px;padding:15px;display:none}button{color:#fff;cursor:pointer;background-color:#c02c38;border:none;border-radius:4px;margin:10px;padding:12px 24px;font-size:16px}button:hover{background-color:#a02530}button:disabled{cursor:not-allowed;background-color:#666}.button-container{text-align:center}#log{white-space:pre-wrap;background-color:#1a1a1a;border:1px solid #444;border-radius:4px;max-height:300px;margin-top:20px;padding:15px;font-family:monospace;overflow-y:auto}</style><body>
    <div class=container>
        <h1>Reset Database with Wing 8 Steps</h1>
        
        <div class=warning>
            <strong>⚠️ Warning:</strong> This will completely reset your raid tracker database and remove all existing data including runs, deaths, and progress. This action cannot be undone.
        </div>
        
        <div class=info>
            <strong>ℹ️ What this does:</strong>
            <ul>
                <li>Deletes the existing RaidTrackerDatabase</li>
                <li>Creates a fresh database with all raid wings</li>
                <li>Adds steps for ALL raid wings (Wings 1-8)</li>
                <li>Each wing will have steps for all major encounters and bosses</li>
                <li>Enables full step tracking functionality for every raid wing</li>
            </ul>
        </div>
        
        <div class=success id=successMessage>
            <strong>✅ Success:</strong> Database has been reset successfully! All raid wings (1-8) now have steps available. You can now go back to the main application and start tracking runs for any raid wing with full step progression.
        </div>
        
        <div class=error id=errorMessage>
            <strong>❌ Error:</strong> <span id=errorText></span>
        </div>
        
        <div class=button-container>
            <button id=resetButton onclick=resetDatabase()>Reset Database &amp; Add Wing 8 Steps</button>
            <button onclick=window.close()>Cancel</button>
        </div>
        
        <div id=log></div>
    </div>

    <script>function log(e){let a=document.getElementById("log"),i=new Date().toLocaleTimeString();a.textContent+=`[${i}] ${e}
`,a.scrollTop=a.scrollHeight}async function resetDatabase(){let e=document.getElementById("resetButton"),a=document.getElementById("successMessage"),i=document.getElementById("errorMessage"),r=document.getElementById("errorText");e.disabled=!0,e.textContent="Resetting...",a.style.display="none",i.style.display="none";try{log("Starting database reset..."),log("Deleting existing database..."),await new Promise((e,a)=>{let i=indexedDB.deleteDatabase("RaidTrackerDatabase");i.onsuccess=()=>{log("Existing database deleted successfully"),e()},i.onerror=()=>{a(Error("Failed to delete existing database"))},i.onblocked=()=>{log("Database deletion blocked - please close all other tabs with the application")}}),await new Promise(e=>setTimeout(e,500)),log("Creating new database...");let i=await new Promise((e,a)=>{let i=indexedDB.open("RaidTrackerDatabase",1);i.onerror=()=>{a(Error("Failed to open database"))},i.onsuccess=a=>{e(a.target.result)},i.onupgradeneeded=e=>{let a=e.target.result;if(log("Creating object stores..."),a.objectStoreNames.contains("raidWings")||a.createObjectStore("raidWings",{keyPath:"id",autoIncrement:!0}).createIndex("name","name",{unique:!1}),!a.objectStoreNames.contains("raidSteps")){let e=a.createObjectStore("raidSteps",{keyPath:"id",autoIncrement:!0});e.createIndex("raidWingId","raidWingId",{unique:!1}),e.createIndex("order","order",{unique:!1})}if(!a.objectStoreNames.contains("deathEvents")){let e=a.createObjectStore("deathEvents",{keyPath:"id",autoIncrement:!0});e.createIndex("runId","runId",{unique:!1}),e.createIndex("timestamp","timestamp",{unique:!1})}if(!a.objectStoreNames.contains("raidRuns")){let e=a.createObjectStore("raidRuns",{keyPath:"id",autoIncrement:!0});e.createIndex("raidWingId","raidWingId",{unique:!1}),e.createIndex("startTime","startTime",{unique:!1}),e.createIndex("status","status",{unique:!1})}log("Object stores created successfully")}});log("Populating database with default data...");let r=i.transaction(["raidWings","raidSteps"],"readwrite"),n=r.objectStore("raidWings"),t=r.objectStore("raidSteps");for(let e of[{name:"Spirit Vale (Wing 1)",description:"The first raid wing, featuring Vale Guardian, Gorseval, and Sabetha.",bosses:["Vale Guardian","Gorseval","Sabetha"],imageUrl:"https://wiki.guildwars2.com/images/thumb/5/5f/Spirit_Vale_loading_screen.jpg/300px-Spirit_Vale_loading_screen.jpg"},{name:"Salvation Pass (Wing 2)",description:"The second raid wing, featuring Slothasor, Bandit Trio, and Matthias.",bosses:["Slothasor","Bandit Trio","Matthias Gabrel"],imageUrl:"https://wiki.guildwars2.com/images/thumb/3/3f/Salvation_Pass_loading_screen.jpg/300px-Salvation_Pass_loading_screen.jpg"},{name:"Stronghold of the Faithful (Wing 3)",description:"The third raid wing, featuring Escort, Keep Construct, and Xera.",bosses:["Escort","Keep Construct","Xera"],imageUrl:"https://wiki.guildwars2.com/images/thumb/1/1f/Stronghold_of_the_Faithful_loading_screen.jpg/300px-Stronghold_of_the_Faithful_loading_screen.jpg"},{name:"Bastion of the Penitent (Wing 4)",description:"The fourth raid wing, featuring Cairn, Mursaat Overseer, Samarog, and Deimos.",bosses:["Cairn the Indomitable","Mursaat Overseer","Samarog","Deimos"],imageUrl:"https://wiki.guildwars2.com/images/thumb/8/8f/Bastion_of_the_Penitent_loading_screen.jpg/300px-Bastion_of_the_Penitent_loading_screen.jpg"},{name:"Hall of Chains (Wing 5)",description:"The fifth raid wing, featuring Soulless Horror, River of Souls, Statues of Grenth, and Dhuum.",bosses:["Soulless Horror","River of Souls","Statues of Grenth","Dhuum"],imageUrl:"https://wiki.guildwars2.com/images/thumb/e/e4/Hall_of_Chains_loading_screen.jpg/300px-Hall_of_Chains_loading_screen.jpg"},{name:"Mythwright Gambit (Wing 6)",description:"The sixth raid wing, featuring Conjured Amalgamate, Twin Largos, and Qadim.",bosses:["Conjured Amalgamate","Twin Largos","Qadim"],imageUrl:"https://wiki.guildwars2.com/images/thumb/f/f2/Mythwright_Gambit_loading_screen.jpg/300px-Mythwright_Gambit_loading_screen.jpg"},{name:"The Key of Ahdashim (Wing 7)",description:"The seventh raid wing, featuring Cardinal Adina, Cardinal Sabir, and Qadim the Peerless.",bosses:["Cardinal Adina","Cardinal Sabir","Qadim the Peerless"],imageUrl:"https://wiki.guildwars2.com/images/thumb/8/8d/The_Key_of_Ahdashim_loading_screen.jpg/300px-The_Key_of_Ahdashim_loading_screen.jpg"},{name:"Mount Balrior (Wing 8)",description:"The eighth raid wing, featuring Greer, Decima, and Ura.",bosses:["Greer","Decima","Ura"],imageUrl:"https://wiki.guildwars2.com/images/thumb/5/5f/Dragonstorm_loading_screen.jpg/300px-Dragonstorm_loading_screen.jpg"}])log(`Adding wing: ${e.name}`),n.add(e).onsuccess=a=>{let i=a.target.result;"Spirit Vale (Wing 1)"===e.name?[{name:"Start",description:"Beginning of the raid",order:0,raidWingId:i},{name:"Vale Guardian",description:"First boss",order:1,raidWingId:i},{name:"Spirit Woods",description:"Traverse the spirit woods",order:2,raidWingId:i},{name:"Gorseval",description:"Second boss",order:3,raidWingId:i},{name:"Sabetha",description:"Final boss",order:4,raidWingId:i}].forEach(e=>{t.add(e),log(`  Added step: ${e.name}`)}):"Salvation Pass (Wing 2)"===e.name?[{name:"Start",description:"Beginning of the raid",order:0,raidWingId:i},{name:"Slothasor",description:"First boss",order:1,raidWingId:i},{name:"Bandit Trio",description:"Second encounter",order:2,raidWingId:i},{name:"Matthias Gabrel",description:"Final boss",order:3,raidWingId:i}].forEach(e=>{t.add(e),log(`  Added step: ${e.name}`)}):"Stronghold of the Faithful (Wing 3)"===e.name?[{name:"Start",description:"Beginning of the raid",order:0,raidWingId:i},{name:"Escort",description:"Escort encounter",order:1,raidWingId:i},{name:"Keep Construct",description:"Second boss",order:2,raidWingId:i},{name:"Xera",description:"Final boss",order:3,raidWingId:i}].forEach(e=>{t.add(e),log(`  Added step: ${e.name}`)}):"Bastion of the Penitent (Wing 4)"===e.name?[{name:"Start",description:"Beginning of the raid",order:0,raidWingId:i},{name:"Cairn the Indomitable",description:"First boss",order:1,raidWingId:i},{name:"Mursaat Overseer",description:"Second boss",order:2,raidWingId:i},{name:"Samarog",description:"Third boss",order:3,raidWingId:i},{name:"Deimos",description:"Final boss",order:4,raidWingId:i}].forEach(e=>{t.add(e),log(`  Added step: ${e.name}`)}):"Hall of Chains (Wing 5)"===e.name?[{name:"Start",description:"Beginning of the raid",order:0,raidWingId:i},{name:"Soulless Horror",description:"First boss",order:1,raidWingId:i},{name:"River of Souls",description:"Second encounter",order:2,raidWingId:i},{name:"Statues of Grenth",description:"Third encounter",order:3,raidWingId:i},{name:"Dhuum",description:"Final boss",order:4,raidWingId:i}].forEach(e=>{t.add(e),log(`  Added step: ${e.name}`)}):"Mythwright Gambit (Wing 6)"===e.name?[{name:"Start",description:"Beginning of the raid",order:0,raidWingId:i},{name:"Conjured Amalgamate",description:"First boss",order:1,raidWingId:i},{name:"Twin Largos",description:"Second boss",order:2,raidWingId:i},{name:"Qadim",description:"Final boss",order:3,raidWingId:i}].forEach(e=>{t.add(e),log(`  Added step: ${e.name}`)}):"The Key of Ahdashim (Wing 7)"===e.name?[{name:"Start",description:"Beginning of the raid",order:0,raidWingId:i},{name:"Cardinal Adina",description:"First boss",order:1,raidWingId:i},{name:"Cardinal Sabir",description:"Second boss",order:2,raidWingId:i},{name:"Qadim the Peerless",description:"Final boss",order:3,raidWingId:i}].forEach(e=>{t.add(e),log(`  Added step: ${e.name}`)}):"Mount Balrior (Wing 8)"===e.name&&[{name:"Start",description:"Beginning of the raid",order:0,raidWingId:i},{name:"Greer",description:"First boss",order:1,raidWingId:i},{name:"Decima",description:"Second boss",order:2,raidWingId:i},{name:"Ura",description:"Final boss",order:3,raidWingId:i}].forEach(e=>{t.add(e),log(`  Added step: ${e.name}`)})};await new Promise((e,a)=>{r.oncomplete=()=>{log("All data added successfully"),e()},r.onerror=()=>{a(Error("Failed to add data to database"))}}),i.close(),log("Database reset completed successfully!"),a.style.display="block",e.textContent="Reset Complete!"}catch(a){log(`Error: ${a.message}`),r.textContent=a.message,i.style.display="block",e.disabled=!1,e.textContent="Reset Database & Add Wing 8 Steps"}}</script>

