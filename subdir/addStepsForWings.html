<!DOCTYPE html><html lang=en><meta charset=UTF-8><meta name=viewport content="width=device-width, initial-scale=1.0"><title>Add Steps for Raid Wings</title><style>body{color:#fff;background-color:#1a1a1a;max-width:800px;margin:0 auto;padding:20px;font-family:Arial,sans-serif}.container{background-color:#2a2a2a;border-radius:8px;padding:30px;box-shadow:0 4px 6px #0000004d}h1{color:#c02c38;text-align:center;margin-bottom:30px}.info{color:#fff;background-color:#1976d2;border-radius:4px;margin-bottom:20px;padding:15px}.success{color:#fff;background-color:#388e3c;border-radius:4px;margin-bottom:20px;padding:15px;display:none}.error{color:#fff;background-color:#d32f2f;border-radius:4px;margin-bottom:20px;padding:15px;display:none}button{color:#fff;cursor:pointer;background-color:#c02c38;border:none;border-radius:4px;margin:10px;padding:12px 24px;font-size:16px}button:hover{background-color:#a02530}button:disabled{cursor:not-allowed;background-color:#666}.button-container{text-align:center}#log{white-space:pre-wrap;background-color:#1a1a1a;border:1px solid #444;border-radius:4px;max-height:300px;margin-top:20px;padding:15px;font-family:monospace;overflow-y:auto}</style><body>
    <div class=container>
        <h1>Add Steps for Raid Wings</h1>
        
        <div class=info>
            <strong>ℹ️ What this does:</strong>
            <ul>
                <li>Adds predefined steps for raid wings 3-8</li>
                <li>Does NOT delete any existing data</li>
                <li>Skips wings that already have steps</li>
                <li>Each wing will have steps for all major encounters and bosses</li>
            </ul>
        </div>
        
        <div class=success id=successMessage>
            <strong>✅ Success:</strong> Steps have been added successfully for all raid wings!
        </div>
        
        <div class=error id=errorMessage>
            <strong>❌ Error:</strong> <span id=errorText></span>
        </div>
        
        <div class=button-container>
            <button id=addStepsButton onclick=addStepsForWings()>Add Steps for Wings 3-8</button>
            <button onclick=window.close()>Cancel</button>
        </div>
        
        <div id=log></div>
    </div>

    <script>function log(e){let i=document.getElementById("log"),d=new Date().toLocaleTimeString();i.textContent+=`[${d}] ${e}
`,i.scrollTop=i.scrollHeight}async function addStepsForWings(){let e=document.getElementById("addStepsButton"),i=document.getElementById("successMessage"),d=document.getElementById("errorMessage"),r=document.getElementById("errorText");e.disabled=!0,e.textContent="Adding Steps...",i.style.display="none",d.style.display="none";try{log("Starting to add steps for wings 3-8...");let d=await new Promise((e,i)=>{let d=indexedDB.open("RaidTrackerDatabase",1);d.onerror=()=>{i(Error("Failed to open database"))},d.onsuccess=i=>{e(i.target.result)}}),r=d.transaction(["raidWings","raidSteps"],"readwrite"),n=r.objectStore("raidWings"),o=r.objectStore("raidSteps"),t=await new Promise((e,i)=>{let d=n.getAll();d.onsuccess=()=>e(d.result),d.onerror=()=>i(Error("Failed to get raid wings"))});for(let e of(log(`Found ${t.length} raid wings in the database`),t)){let i=await new Promise((i,d)=>{let r=o.index("raidWingId").count(e.id);r.onsuccess=()=>i(r.result),r.onerror=()=>d(Error(`Failed to count steps for wing ${e.id}`))});if(i>0){log(`Wing ${e.id} (${e.name}) already has ${i} steps. Skipping.`);continue}if(log(`Adding steps for wing ${e.id} (${e.name})...`),e.name.includes("Stronghold of the Faithful")||e.name.includes("Wing 3"))for(let i of[{name:"Start",description:"Beginning of the raid",order:0,raidWingId:e.id},{name:"Escort",description:"Escort encounter",order:1,raidWingId:e.id},{name:"Keep Construct",description:"Second boss",order:2,raidWingId:e.id},{name:"Xera",description:"Final boss",order:3,raidWingId:e.id}])await new Promise((e,d)=>{let r=o.add(i);r.onsuccess=()=>{log(`  Added step: ${i.name}`),e()},r.onerror=()=>d(Error(`Failed to add step ${i.name}`))});else if(e.name.includes("Bastion of the Penitent")||e.name.includes("Wing 4"))for(let i of[{name:"Start",description:"Beginning of the raid",order:0,raidWingId:e.id},{name:"Cairn the Indomitable",description:"First boss",order:1,raidWingId:e.id},{name:"Mursaat Overseer",description:"Second boss",order:2,raidWingId:e.id},{name:"Samarog",description:"Third boss",order:3,raidWingId:e.id},{name:"Deimos",description:"Final boss",order:4,raidWingId:e.id}])await new Promise((e,d)=>{let r=o.add(i);r.onsuccess=()=>{log(`  Added step: ${i.name}`),e()},r.onerror=()=>d(Error(`Failed to add step ${i.name}`))});else if(e.name.includes("Hall of Chains")||e.name.includes("Wing 5"))for(let i of[{name:"Start",description:"Beginning of the raid",order:0,raidWingId:e.id},{name:"Soulless Horror",description:"First boss",order:1,raidWingId:e.id},{name:"River of Souls",description:"Second encounter",order:2,raidWingId:e.id},{name:"Statues of Grenth",description:"Third encounter",order:3,raidWingId:e.id},{name:"Dhuum",description:"Final boss",order:4,raidWingId:e.id}])await new Promise((e,d)=>{let r=o.add(i);r.onsuccess=()=>{log(`  Added step: ${i.name}`),e()},r.onerror=()=>d(Error(`Failed to add step ${i.name}`))});else if(e.name.includes("Mythwright Gambit")||e.name.includes("Wing 6"))for(let i of[{name:"Start",description:"Beginning of the raid",order:0,raidWingId:e.id},{name:"Conjured Amalgamate",description:"First boss",order:1,raidWingId:e.id},{name:"Twin Largos",description:"Second boss",order:2,raidWingId:e.id},{name:"Qadim",description:"Final boss",order:3,raidWingId:e.id}])await new Promise((e,d)=>{let r=o.add(i);r.onsuccess=()=>{log(`  Added step: ${i.name}`),e()},r.onerror=()=>d(Error(`Failed to add step ${i.name}`))});else if(e.name.includes("Key of Ahdashim")||e.name.includes("Wing 7"))for(let i of[{name:"Start",description:"Beginning of the raid",order:0,raidWingId:e.id},{name:"Cardinal Adina",description:"First boss",order:1,raidWingId:e.id},{name:"Cardinal Sabir",description:"Second boss",order:2,raidWingId:e.id},{name:"Qadim the Peerless",description:"Final boss",order:3,raidWingId:e.id}])await new Promise((e,d)=>{let r=o.add(i);r.onsuccess=()=>{log(`  Added step: ${i.name}`),e()},r.onerror=()=>d(Error(`Failed to add step ${i.name}`))});else if(e.name.includes("Mount Balrior")||e.name.includes("Wing 8"))for(let i of[{name:"Start",description:"Beginning of the raid",order:0,raidWingId:e.id},{name:"Greer",description:"First boss",order:1,raidWingId:e.id},{name:"Decima",description:"Second boss",order:2,raidWingId:e.id},{name:"Ura",description:"Final boss",order:3,raidWingId:e.id}])await new Promise((e,d)=>{let r=o.add(i);r.onsuccess=()=>{log(`  Added step: ${i.name}`),e()},r.onerror=()=>d(Error(`Failed to add step ${i.name}`))})}d.close(),log("Steps added successfully for all raid wings!"),i.style.display="block",e.textContent="Steps Added Successfully!"}catch(i){log(`Error: ${i.message}`),r.textContent=i.message,d.style.display="block",e.disabled=!1,e.textContent="Add Steps for Wings 3-8"}}</script>

